<div data-ng-controller="religiousPaymentController as religiousPaymentVM"
    data-ng-init="religiousPaymentVM.getProgramType();">
    <!-- Content Wrapper. Contains page content -->
    <div class="col-sm-8 col-xs-12 col-md-9 col-lg-10 ">
        <div class="content-wrapper">
            <!-- Content Header (Page header) -->
            <section class="content-header">
            </section>

            <!-- Main content -->
            <section class="content">
                <!-- Your Page Content Here -->
                <div class="row">
                    <div class="col-md-10 col-xs-12 col-md-offset-1">
                        <div class="col-md-10 box box-primary">
                            <div class="box-header">
                                <div class="box-title">
                                    {{ 'ADD RELIGIOUS PAYMENT' | translate }}
                                </div>
                            </div>
                            <div class="box-body">
                                <form role="form" name="publishForm" enctype="multipart/form-data"
                                    data-ng-submit="religiousPaymentVM.addReligiousPayment(publishForm.$valid)">
                                    <div class="col-md-6 no-padding">
                                        <div class="col-md-12 no-padding">
                                            <label
                                                class="control-label">{{ 'RELIGIOUS PAYMENT NAME' | translate }}</label>
                                            <input type="text" name="religiousPaymentName" required maxlength="80"
                                                data-ng-model="religiousPaymentVM.religiousPaymentName"
                                                class="form-control col-md-6"
                                                placeholder="{{ 'RELIGIOUS PAYMENT NAME' | translate }}" />
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="form-group">
                                            <div class="col-md-12 nopadding">
                                                <label class="control-label">{{'RELIGIOUS PAYMENT SLUG' | translate}}</label>
                                                <input type="text" name="religiousPaymentSlug" required maxlength="80"
                                                    data-ng-model="religiousPaymentVM.religiousPaymentSlug"
                                                    class="form-control col-md-6"
                                                    placeholder="{{'RELIGIOUS PAYMENT SLUG' | translate}}" />
                                            </div>
                                        </div>
                                    </div>
                                    <!--<div class="col-md-6">-->
                                    <!--<div class="col-md-12">-->
                                    <!--<label class="control-label">Religious Payment Description</label>-->
                                    <!--<textarea type="text" name="description" required maxlength="500" data-ng-model="religiousPaymentVM.religiousPaymentDescription"-->
                                    <!--class="form-control col-md-6" placeholder="Religious Payment Description" />-->
                                    <!--</div>-->
                                    <!--</div>-->
                                    <div class="col-md-12 no-padding"><br>
                                        <label class="control-label">{{ 'PAYMENT DESCRIPTION' | translate }}</label>
                                        <div id="editor" aria-placeholder="Write" class="no-padding">
                                            <div id='addreligiouspayment' name="addreligiouspayment">
                                            </div>
                                        </div>
                                    </div>


                                    <div class="col-md-12 no-padding" style="margin-top:20px">
                                        <div class="col-md-4 no-padding">
                                            <input type="checkbox" name="hasSubCategory"
                                                ng-model="religiousPaymentVM.hasCategories" />{{ 'SUB CATEGORIES' | translate }}
                                        </div>
                                        <div class="col-md-10" style="margin-top:10px"
                                            ng-show="religiousPaymentVM.hasCategories">
                                            <table class="table table-bordered">
                                                <thead class="success">
                                                    <td class="col-md-2"> {{ 'SELECT' | translate }}</td>
                                                    <td>{{ 'CATEGORIES' | translate }}</td>
                                                </thead>
                                                <tr
                                                    ng-repeat="x in religiousPaymentVM.religiousPaymentCategories track by $index">
                                                    <td>
                                                        <input type="checkbox" class=""
                                                            ng-click="religiousPaymentVM.addOrRemoveSubcategory(x)">
                                                    </td>
                                                    <td>{{x.programSubCategoryName}}</td>
                                                </tr>
                                            </table>
                                        </div>
                                    </div>
                                    <div class="col-md-6" style="margin-top:20px">
                                        <div class="form-group">
                                            <div class="col-md-12">
                                                <label
                                                    class="control-label">{{ 'RELIGIOUS PAYMENT IMAGE' | translate }}</label>
                                                <input type="file" name="file" required
                                                    file-model="religiousPaymentVM.file" class="image "
                                                    placeholder="{{ 'RELIGIOUS PAYMENT IMAGE' | translate }}" />
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-12" style="margin-top:20px">
                                        <div class="box box-info">
                                            <div class="box-header">
                                                <h3 class="box-title">{{ 'DONATION PROCESS' | translate }}</h3>
                                            </div>
                                            <div class="box-body">
                                                <div class="col-md-12">
                                                    <div class="col-md-8">
                                                        <div class="checkbox">
                                                            <label>
                                                                <input type="checkbox" name="minimumAmount"
                                                                    ng-model="religiousPaymentVM.isMinimumAmount" />
                                                                {{ 'MIN AMOUNT' | translate }}</label>
                                                        </div>
                                                        <div class="col-md-4"
                                                            ng-show="religiousPaymentVM.isMinimumAmount">
                                                            <label>{{'ENTER VALUE' | translate }}</label>
                                                            <div class="input-group date">
                                                                <input type="text" ng-keypress="isNumberKey($event)"
                                                                    class="form-control pull-right validateNumber"
                                                                    maxlength="8"
                                                                    ng-required="religiousPaymentVM.isMinimumAmount"
                                                                    ng-model="religiousPaymentVM.minimumAmount" />
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="col-md-12">
                                                    <div class="col-md-8">
                                                        <div class="checkbox">
                                                            <label>
                                                                <input type="checkbox" name="recurring"
                                                                    ng-model="religiousPaymentVM.isRecurring" />
                                                                {{'RECURRING' | translate }}
                                                            </label>
                                                        </div>
                                                        <div class="col-md-10" ng-show="religiousPaymentVM.isRecurring">
                                                            <table class="table table-bordered">
                                                                <thead class="success">
                                                                    <td> {{ 'SELECT' | translate }}t</td>
                                                                    <td>{{ 'DONATION DURATION' | translate }}</td>
                                                                </thead>
                                                                <tr
                                                                    ng-repeat="x in religiousPaymentVM.donationDurations track by $index">
                                                                    <td>
                                                                        <input id="{{x._id}}" type="checkbox"
                                                                            ng-checked="x.selected" class=""
                                                                            ng-click="religiousPaymentVM.addorRemoveDonationDuration(x)">
                                                                    </td>
                                                                    <td>{{x.donationDurationName}}</td>
                                                                </tr>
                                                            </table>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="col-md-12">
                                                    <div class="col-md-4">
                                                        <div class="checkbox">
                                                            <label>
                                                                <input type="checkbox" name="yearAround"
                                                                    ng-model="religiousPaymentVM.isYearAround" />
                                                                {{ 'YEAR AROUND' | translate }}</label>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="col-md-12">
                                                    <div class="col-md-8">
                                                        <div class="checkbox">
                                                            <label>
                                                                <input type="checkbox" name="amount"
                                                                    ng-model="religiousPaymentVM.isAmount" />
                                                                {{'FIXED AMOUNT' | translate }}
                                                            </label>
                                                        </div>
                                                        <div class="col-md-4" ng-show="religiousPaymentVM.isAmount">
                                                            <label>{{'ENTER VALUE' | translate }}</label>
                                                            <div class="input-group date">
                                                                <input type="text" ng-keypress="isNumberKey($event)"
                                                                    class="form-control pull-right validateNumber"
                                                                    maxlength="8"
                                                                    ng-required="religiousPaymentVM.isAmount"
                                                                    ng-model="religiousPaymentVM.amount" />
                                                            </div>
                                                        </div>
                                                        <label
                                                            ng-if="religiousPaymentVM.minimumAmount > 0 && religiousPaymentVM.minimumAmount > religiousPaymentVM.amount"
                                                            class="text-danger">Fixed Amount should be greater than
                                                            minimum amount</label>
                                                    </div>
                                                </div>
                                                <div class="col-md-12">
                                                    <div class="col-md-4">
                                                        <div class="checkbox">
                                                            <label>
                                                                <input type="checkbox" name="isMarhomeenName"
                                                                    ng-model="religiousPaymentVM.isMarhomeenName" />
                                                                {{ 'MARHAMOEEN' | translate }}</label>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="col-md-12">
                                                    <div class="col-md-4">
                                                        <div class="checkbox">
                                                            <label>
                                                                <input type="checkbox" name="isCalendar"
                                                                    ng-model="religiousPaymentVM.isCalendar" />{{ 'CALENDAR' | translate }}</label>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="col-md-12">
                                                    <div class="col-md-4">
                                                        <div class="checkbox">
                                                            <label>
                                                                <input type="checkbox" name="isSyed"
                                                                    ng-model="religiousPaymentVM.isSyed" />
                                                                Syed/Non-Syed</label>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="col-md-12">
                                                    <div class="col-md-4">
                                                        <div class="checkbox">
                                                            <label>
                                                                <input type="checkbox" name="isOtherFieldForNiyaz"
                                                                    ng-model="religiousPaymentVM.isOtherFieldForNiyaz" />{{ 'OTHER FIELD FOR NIYAZ' | translate }}</label>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="col-md-12">
                                                    <div class="col-md-2">
                                                        <div class="checkbox">
                                                            <label>
                                                                <input type="checkbox" name="duration"
                                                                    ng-model="religiousPaymentVM.isDuration" />
                                                                {{ 'DURATION' | translate }}
                                                            </label>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="col-md-12" ng-show="religiousPaymentVM.isDuration">
                                                    <div class="col-md-4">
                                                        <label>{{'START DATE'| translate}}</label>
                                                        <div class="input-group date">
                                                            <div class="input-group-addon">
                                                                <i class="fa fa-calendar"></i>
                                                            </div>
                                                            <input type="text" id="txtFromDate"
                                                                ng-click="setPosFromDate();"
                                                                ng-change="startDateChange()" name="durationStart"
                                                                class="form-control pull-right readonly"
                                                                ng-required="religiousPaymentVM.isDuration"
                                                                ng-model="religiousPaymentVM.StartDate" />
                                                        </div>
                                                    </div>
                                                    <div class="col-md-4">
                                                        <label>{{'END DATE'| translate}}</label>
                                                        <div class="input-group date">
                                                            <div class="input-group-addon">
                                                                <i class="fa fa-calendar"></i>
                                                            </div>
                                                            <input type="text" id="txtToDate" ng-click="setPosToDate();"
                                                                class="form-control pull-right readonly"
                                                                ng-required="religiousPaymentVM.isDuration"
                                                                ng-model="religiousPaymentVM.EndDate" />
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="col-md-12">
                                                    <div class="col-md-2">
                                                        <div class="checkbox">
                                                            <label>
                                                                <input type="checkbox" name="isCount"
                                                                    ng-model="religiousPaymentVM.isCount" />{{'COUNT'| translate}}
                                                            </label>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="col-md-12" ng-show="religiousPaymentVM.isCount">

                                                    <div class="col-md-4">
                                                        <label>{{'MIN' | translate}}</label>
                                                        <input type="text" class="form-control validateNumber"
                                                            ng-model="religiousPaymentVM.count.min" maxlength="3"
                                                            ng-required="religiousPaymentVM.isCount" placeholder="1" />
                                                    </div>
                                                    <div class="col-md-4">
                                                        <label>{{'MAX' | translate}}</label>
                                                        <input type="text" class="form-control validateNumber"
                                                            ng-model="religiousPaymentVM.count.max" maxlength="3"
                                                            ng-required="religiousPaymentVM.isCount"
                                                            placeholder="100" />
                                                    </div>
                                                    <div class="col-md-4">
                                                        <label>{{'INTERVAL'| translate}}</label>
                                                        <input type="text" class="form-control validateNumber"
                                                            ng-model="religiousPaymentVM.count.interval" maxlength="3"
                                                            ng-required="religiousPaymentVM.isCount" placeholder="10" />
                                                    </div>
                                                </div>
                                                <div class="col-md-12">
                                                    <div class="col-md-4" style="margin-top: 10px;">
                                                        <label>{{ 'PRIORITY RANK' | translate }}</label>
                                                        <input type="text" ng-keypress="isNumberKey($event)" class="form-control validateNumber"
                                                            ng-model="religiousPaymentVM.programPriority" min='1'
                                                            required placeholder="1" />
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="form-group">

                                                <div class="col-md-3">
                                                    <button name="publish" type="submit"
                                                        class="btn btn-primary pull-right"
                                                        ng-disabled="(religiousPaymentVM.isMinimumAmount && religiousPaymentVM.isAmount) && religiousPaymentVM.minimumAmount > 0 && (religiousPaymentVM.minimumAmount > religiousPaymentVM.amount)"
                                                        style="margin-top:5px;">{{ 'ADD RELIGIOUS PAYMENT' | translate }}</button>
                                                </div>
                                            </div>

                                </form>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
            <!-- /.content -->
        </div>
        <!-- HEADER -->
    </div>
</div>
<script>
    jQuery(document).on('keypress paste', '.validateNumber', function (event) {
        var regex = new RegExp(/^[A-Za-z~`!@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?]*$/);
        var key = String.fromCharCode(!event.charCode ? event.which : event.charCode);
        if (regex.test(key)) {
            jQuery(this).focus();
            jQuery(this).parent().next('span:first').html("<span class='inputError'></span>").show().fadeOut();
            return false;
        } else {
            jQuery(this).parent().next('span:first').html("");
            return true;
        }
    });
    jQuery(".readonly").on('keydown paste', function (e) {
        e.preventDefault();
    });
</script>


<script>
    jQuery(function () {
        jQuery('#addreligiouspayment').editable({ inlineMode: false, fullPage: true });
    });
</script>